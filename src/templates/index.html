<!doctype html>
<html lang="fr">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="UTF-8" />
        <link rel="manifest" href="/static/manifest.json" />
        <meta name="theme-color" content="#0B0F1A" />
        <title>Pro Axess</title>
        <link
            rel="icon"
            type="image/x-icon"
            href="{{ url_for('static', filename='icons/icon.ico') }}"
        />
        <link
            rel="stylesheet"
            href="{{ url_for('static', filename='style.css') }}"
        />
    </head>

    <body>
        <div id="themeButtons" style="display: flex; gap: 6px; margin: 10px 0">
            <button class="theme-btn" data-theme="red" title="Rouge"></button>
            <button
                class="theme-btn"
                data-theme="purple"
                title="Violet"
            ></button>
            <button class="theme-btn" data-theme="blue" title="Bleu"></button>
            <button class="theme-btn" data-theme="green" title="Vert"></button>
            <button
                class="theme-btn"
                data-theme="yellow"
                title="Jaune"
            ></button>
        </div>

        <div id="loading-overlay">
            <div class="spinner"></div>
        </div>
        <div id="login">
            <h1>Pro Axess</h1>
            <input type="text" id="username" placeholder="Identifiant" />
            <input type="password" id="password" placeholder="Mot de passe" />
            <button onclick="login()" id="loginButton">Se connecter</button>
            <p id="error"></p>

            <div id="login" class="disclaimer-box">
                <strong>‚ÑπÔ∏è Informations</strong><br />
                Ce projet est en d√©veloppement actif et peut contenir des
                fonctionnalit√©s exp√©rimentales. Vos contributions, suggestions
                et retours sont les bienvenus ‚Äî contactez-moi pour en discuter.
                <br /><br />
                <a
                    href="https://github.com/zerofish0/axess-pro"
                    target="_blank"
                >
                    Consulter le d√©p√¥t GitHub du projet </a
                ><br /><br />
                <strong>Mentions l√©gales</strong><br />
                Ce projet est distribu√© √† titre √©ducatif et sans garantie
                d‚Äôaucune sorte. L‚Äôauteur ne saurait √™tre tenu responsable de
                tout dommage, perte de donn√©es ou mauvaise utilisation du code.
                En utilisant ce projet, vous acceptez ces conditions.
                <br /><br />
                <strong>Remerciements</strong><br />
                <a href="https://github.com/bain3/pronotepy" target="_blank">
                    - Pronotepy </a
                ><br />
                <a href="https://chatgpt.com" target="_blank"> - ChatGPT </a
                ><br /><br />
                <strong>‚ÄºÔ∏è Attention : √©cart entre les moyennes</strong><br />
                Les moyennes affich√©es sur ce site peuvent diff√©rer de celles de Pronote. 
                Pronote utilise une m√©thode de calcul qui modifie le poids des coefficients en fonction de la note maximale, 
                ce qui peut entra√Æner des √©carts avec la moyenne pond√©r√©e classique utilis√©e ici. Pour plus de d√©tails, consulter
                <a
                    href="https://www.mediafire.com/file/nuad6pe4gwr9ce3/thepronoteproblem.pdf/file"
                    target="_blank"
                >
                     ce document</a
                >
            </div>
        </div>

        <div id="dashboard" style="display: none">
            <h1 id="greeting">Bonjour üëã</h1>

            <div class="row">
                <div class="section" style="text-align: center">
                    <h2>
                        üõ†Ô∏è Index Momentum
                        <button
                            onclick="toggleInfo()"
                            style="
                                cursor: pointer;
                                border: none;
                                background: none;
                                padding: 0;
                                font-size: 1em;
                            "
                        >
                            ‚ÑπÔ∏è
                        </button>
                    </h2>
                    <p id="MomentumInfo" style="display: none">
                        L'index Momentum est une valeur entre 1 et +inf qui refl√®te ton travail,
                        elle ne peut qu'augmenter et refl√®te le travail fourni lors du trimestre,
                        moins on a de bonne notes, moins le momentum augmente.
                    </p>

                    <ul id="momentum"></ul>
                </div>
            </div>

            <div class="row">
                <div class="section">
                    <h2>üìù Devoirs √† faire</h2>
                    <ul id="homework"></ul>
                </div>

                <div class="section">
                    <h2>üìÖ Cours de demain</h2>
                    <ul id="planner"></ul>
                </div>
            </div>

            <div class="row">
                <div class="section">
                    <h2>üìà Moyenne g√©n√©rale</h2>
                    <canvas
                        id="averageCircle"
                        width="200"
                        height="200"
                    ></canvas>
                </div>

                <div class="section">
                    <h2>üìä Moyennes par mati√®re</h2>
                    <canvas id="barChart" height="300"></canvas>
                </div>
            </div>
        </div>

        <div class="bottom-left">
            <p>projet r√©alis√© par Zerofish0</p>
            <p>version : 3.1 (15/11/2025)</p>
            <a
                href="https://0280994d.index-education.net/pronote/eleve.html"
                target="_blank"
            >
                lien de l'ENT
            </a>
        </div>

        <script>
            if ("serviceWorker" in navigator) {
                navigator.serviceWorker
                    .register("/static/service-worker.js")
                    .then(() => console.log("Service Worker enregistr√©"))
                    .catch((err) => console.error("Erreur SW :", err));
            }
        </script>
        <script>
            function toggleInfo() {
                const info = document.getElementById("eloInfo");
                info.style.display =
                    info.style.display === "none" ? "block" : "none";
            }
        </script>
        <script src="{{ url_for('static', filename='script.js') }}"></script>

        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    </body>
</html>
